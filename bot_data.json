def load_data():
    global users, blocked_users, daily_users, registered_users, user_orders
    if os.path.exists(DATA_FILE):
        try:
            with open(DATA_FILE, "r", encoding="utf-8") as f:
                raw = f.read()
                if raw.strip():  # agar boâ€˜sh emas
                    data = json.loads(raw)
                else:
                    data = {}
                users = set(data.get("users", []))
                blocked_users = set(data.get("blocked_users", []))
                daily_users_raw = data.get("daily_users", {})
                daily_users = {key: set(value) for key, value in daily_users_raw.items()}
                registered_users = data.get("registered_users", {})
                user_orders = data.get("user_orders", {})
        except (json.JSONDecodeError, ValueError) as e:
            logger.error(f"Ma'lumotlarni yuklashda xatolik: {e}. Yangi fayl yaratilmoqda.")
            os.remove(DATA_FILE)
            users, blocked_users, daily_users, registered_users, user_orders = set(), set(), {}, {}, {}
    else:
        users, blocked_users, daily_users, registered_users, user_orders = set(), set(), {}, {}, {}

